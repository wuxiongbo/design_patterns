# Separate Query from Modifier （将查询函数和修改函数分离）

某个函数既返回对象状态值，⼜修改对象状态。 

建⽴两个不同的函数，其中⼀个负责查询，另⼀个负责修改。

## 动机

&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
如果某个函数只是向你提供⼀个值，没有任何看得到的副作⽤，那么这是个很有价值的东⻄。
你可以任意调⽤这个函数，也可以把调⽤动作搬到函数的其他地⽅。 
简⽽⾔之，需要操⼼的事情少多了。

&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
明确表现出 “有副作⽤” 与 “⽆副作⽤” 两种函数之间的差异，是个很好的想法。
下⾯是⼀条好规则：**任何有返回值的函数，都不应该有看得到的副作⽤。**
有些程序员甚⾄将此，作为⼀条必须遵守的规则［Meyer］。
就像对待任何东⻄⼀样，我并不绝对遵守它，不过我总是尽量遵守，⽽它也回报我很好的效果。

&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
如果你遇到⼀个“既有 返回值，⼜有 副作⽤”的函数，就应该试着将查询动作从修改动作中分割出来。

&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
你也许已经注意到了：我使⽤“看得到的副作⽤”这种说法。
有⼀种常⻅的优化办法是：将查询所得结果缓存于某个字段中，这么⼀来后续的重复查询就可以⼤⼤加快速度。
虽然这种做法改变了对象的状态，但这⼀修改是察觉不到的，因为不论如何查询，你总是获得相同结果［Meyer］。
