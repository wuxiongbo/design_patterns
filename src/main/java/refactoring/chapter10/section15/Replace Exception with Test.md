# Replace Exception with Test（以测试取代异常）

⾯对⼀个调⽤者可以预先检查的条件，你抛出了⼀个异常。 
修改调⽤者，使它在调⽤函数之前先做检查。

## 动机

异常的出现是程序语⾔的⼀⼤进步。运⽤Replace Error Code with Exception

（310），异常便可协助我们避免很多复杂的错误处理逻辑。但是，就像许多好东⻄⼀ 样，异常也会被滥⽤，从⽽变得不再让⼈愉快（就连味道极好的Aventinus啤酒，喝 得太多也会让我厌烦［Jackson］）。“异常”只应该被⽤于异常的、罕⻅的⾏为，也就

是那些产⽣意料之外的错误的⾏为，⽽不应该成为条件检查的替代品。如果你可以 合理期望调⽤者在调⽤函数之前先检查某个条件，那么就应该提供⼀个测试，⽽调 ⽤者应该使⽤它。

## 做法

⼝ 在函数调⽤点之前，放置⼀个测试语句，将函数内catch区段中的代码复制 到测试句的适当if分⽀中。

⼝ 在catch区段起始处加⼊⼀个断⾔，确保catch区段绝对不会被执⾏。

10 316

第10章 简化函數调⽤

⼜ 编译，测试。

⼜ 移除所有catch区段，然后将try区段内的代码复制到try之外，然后移除 try区段。

⼜编译，测试。

